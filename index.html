<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-44W8FGBJVJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-44W8FGBJVJ');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PasswordStrength — Какой у тебя надёжный пароль?</title>
  <link rel="icon" href="favicon.ico">
  <style>
    :root {
      --bg: #0f172a;
      --card: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --green: #22c55e;
      --yellow: #f59e0b;
      --red: #ef4444;
      --blue: #3b82f6;
    }
    html, body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0b1020, #0f172a 60%, #111827);
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      min-height: 100vh;
    }
    .container {
      max-width: 860px;
      margin: 0 auto;
      padding: 48px 24px;
    }
    header h1 {
      font-size: 2.4rem;
      margin: 0 0 8px;
      letter-spacing: 0.2px;
    }
    header p {
      margin: 0 0 24px;
      color: var(--muted);
      font-size: 1rem;
    }
    .card {
      background: rgba(17, 24, 39, 0.75);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 24px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    }
    .label {
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
    }
    .input-row {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 8px;
    }
    input[type="password"], input[type="text"] {
      flex: 1;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.08);
      background: #0b1220;
      color: var(--text);
      font-size: 1rem;
      outline: none;
    }
    input[type="checkbox"] {
      transform: translateY(1px);
      accent-color: var(--blue);
    }
    .tip {
      font-size: 0.95rem;
      color: var(--muted);
      margin: 8px 0 16px;
    }
    .meter {
      height: 14px;
      border-radius: 999px;
      background: rgba(255,255,255,0.08);
      overflow: hidden;
      margin: 12px 0 8px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .meter-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ef4444, #f59e0b 40%, #22c55e 75%, #16a34a);
      transition: width 200ms ease;
    }
    .strength-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-top: 8px;
    }
    .strength {
      font-weight: 700;
      font-size: 1.05rem;
    }
    .strength--weak { color: var(--red); }
    .strength--medium { color: var(--yellow); }
    .strength--strong { color: var(--green); }

    .requirements {
      display: grid;
      grid-template-columns: repeat(2, minmax(220px, 1fr));
      gap: 10px 16px;
      margin: 18px 0;
    }
    .req-item {
      display: flex;
      gap: 8px;
      align-items: center;
      color: var(--muted);
      font-size: 0.95rem;
    }
    .req-dot {
      width: 10px; height: 10px; border-radius: 50%;
      background: rgba(255,255,255,0.18);
      border: 1px solid rgba(255,255,255,0.18);
    }
    .req-dot.ok {
      background: var(--green);
      border-color: var(--green);
    }

    .fact {
      margin: 12px 0;
      font-size: 0.98rem;
    }
    .badge {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      font-size: 0.9rem;
      color: var(--muted);
      margin-left: 8px;
    }

    .review {
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px dashed rgba(255,255,255,0.12);
      font-size: 1rem;
      color: #cfead6;
    }

    .footer-note {
      margin-top: 24px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .brand {
      color: var(--blue);
      font-weight: 600;
    }

    @media (max-width: 560px) {
      .requirements { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">PasswordCheckerFromErko</div>
      <h1>Какой у тебя надёжный пароль?</h1>
      <p>Пройди тест пароля и узнай, сколько времени понадобится, чтобы его взломать.</p>
    </header>

    <div class="card">
      <label class="label" for="pwd">Пароль</label>
      <div class="input-row">
        <input id="pwd" type="password" placeholder="Введи пароль" autocomplete="off" />
        <label><input id="show" type="checkbox" /> Показать пароль</label>
      </div>

      <div class="tip">
        Совет: добавляя заглавную букву или цифру, не ставь заглавную только в начало и цифру только в конец.
      </div>

      <div class="meter" aria-hidden="true"><div class="meter-fill" id="meterFill"></div></div>
      <div class="strength-row">
        <div id="strengthLabel" class="strength strength--weak">Слабый</div>
        <div id="entropyBadge" class="badge">Энтропия: 0 бита</div>
      </div>

      <div class="requirements">
        <div class="req-item"><span id="reqLen" class="req-dot"></span> Минимум 8 символов</div>
        <div class="req-item"><span id="reqLower" class="req-dot"></span> Строчные буквы (a–z)</div>
        <div class="req-item"><span id="reqUpper" class="req-dot"></span> Заглавные буквы (A–Z)</div>
        <div class="req-item"><span id="reqNum" class="req-dot"></span> Цифры (0–9)</div>
        <div class="req-item"><span id="reqSym" class="req-dot"></span> Символы (!@#…)</div>
      </div>

      <div class="fact">
        <strong>Время взлома:</strong> <span id="crackTime">—</span>
      </div>

      <div class="review" id="reviewText">Введите пароль, чтобы увидеть оценку.</div>
    </div>

    <div class="footer-note">
      Подсчёт основан на энтропии и приблизительной скорости перебора. Это ориентир, а не абсолютная гарантия.
    </div>
  </div>

  <script>
    const pwd = document.getElementById('pwd');
    const show = document.getElementById('show');

    const meterFill = document.getElementById('meterFill');
    const strengthLabel = document.getElementById('strengthLabel');
    const entropyBadge = document.getElementById('entropyBadge');
    const crackTimeEl = document.getElementById('crackTime');
    const reviewText = document.getElementById('reviewText');

    const reqLen = document.getElementById('reqLen');
    const reqLower = document.getElementById('reqLower');
    const reqUpper = document.getElementById('reqUpper');
    const reqNum = document.getElementById('reqNum');
    const reqSym = document.getElementById('reqSym');

    show.addEventListener('change', () => {
      pwd.type = show.checked ? 'text' : 'password';
    });

    pwd.addEventListener('input', () => {
      const val = pwd.value;
      const analysis = analyzePassword(val);

      toggleDot(reqLen, val.length >= 8);
      toggleDot(reqLower, analysis.hasLower);
      toggleDot(reqUpper, analysis.hasUpper);
      toggleDot(reqNum, analysis.hasDigit);
      toggleDot(reqSym, analysis.hasSymbol);

      meterFill.style.width = `${analysis.score}%`;
      strengthLabel.textContent = analysis.strengthText;
      strengthLabel.className = `strength ${analysis.strengthClass}`;

      entropyBadge.textContent = `Энтропия: ${analysis.entropyBits.toFixed(1)} бита`;
      crackTimeEl.textContent = formatCrackTime(analysis.guesses, analysis.gps);

      reviewText.textContent = analysis.review;
    });

    function toggleDot(el, ok) {
      el.classList.toggle('ok', ok);
    }

    function analyzePassword(pwd) {
      const hasLower = /[a-z]/.test(pwd);
      const hasUpper = /[A-Z]/.test(pwd);
      const hasDigit = /\d/.test(pwd);
      const hasSymbol = /[^A-Za-z0-9]/.test(pwd);

      let charset = 0;
      if (hasLower) charset += 26;
      if (hasUpper) charset += 26;
      if (hasDigit) charset += 10;
      if (hasSymbol) charset += 33; 

      const length = pwd.length;
      const entropyBits = length > 0 && charset > 0 ? Math.log2(Math.pow(charset, length)) : 0;

      const gps = 1e10;
      const guesses = length > 0 && charset > 0 ? Math.pow(charset, length) / 2 : 0; // средний случай

      let rawScore = 0;
      rawScore += Math.min(length, 20) * 2.5;       // до 50
      rawScore += (hasLower + hasUpper + hasDigit + hasSymbol) * 10; // до 40
      rawScore += Math.min(entropyBits, 80) * 0.125; // до ~10
      let score = Math.max(0, Math.min(100, rawScore));

      let strengthText = 'Слабый';
      let strengthClass = 'strength--weak';
      let review = 'Пароль уязвим. Добавь длину и разные типы символов.';
      if (score >= 35 && score < 55) {
        strengthText = 'Средний';
        strengthClass = 'strength--medium';
        review = 'Неплохо. Сделай пароль длиннее и избегай шаблонов (qwerty, 1234, дата).';
      } else if (score >= 55) {
        strengthText = 'Очень сильный';
        strengthClass = 'strength--strong';
        review = 'Отлично — близко к «крепости». Храни его в менеджере паролей.';
      }

      if (length >= 10 && hasLower && hasUpper && hasDigit && hasSymbol) {
        strengthText = 'Очень сильный';
        strengthClass = 'strength--strong';
        score = Math.max(score, 85);
        review = 'Фантастика: такой пароль крепок как Форт-Нокс.';
      }

      return {
        hasLower, hasUpper, hasDigit, hasSymbol,
        entropyBits, guesses, gps,
        score, strengthText, strengthClass,
        review
      };
    }

    function formatCrackTime(guesses, gps) {
      if (!guesses || !gps) return '—';
      const seconds = guesses / gps;

      const units = [
        { name: 'секунд', value: 1 },
        { name: 'минут', value: 60 },
        { name: 'часов', value: 3600 },
        { name: 'дней', value: 86400 },
        { name: 'лет', value: 31557600 },      
        { name: 'веков', value: 3155760000 }     
      ];
      let chosen = units[0];
      for (let u of units) {
        if (seconds / u.value >= 1) chosen = u;
      }
      const amount = seconds / chosen.value;
     
      if (amount >= 100 && chosen.name === 'лет') {
        chosen = { name: 'веков', value: 3155760000 };
      }
      return `${amount.toFixed(amount >= 10 ? 0 : 1)} ${chosen.name}`;
    }
  </script>
</body>
</html>



